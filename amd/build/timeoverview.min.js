define("lytix_timeoverview/timeoverview",["exports","core/templates","lytix_helper/widget","lytix_helper/percent_rounder"],(function(_exports,_templates,_widget,_percent_rounder){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=_interopRequireDefault(_templates),_widget=_interopRequireDefault(_widget),_percent_rounder=_interopRequireDefault(_percent_rounder);_exports.init=(contextid,courseid,containerid)=>{const WIDGET_ID=containerid??"timeoverview",dataPromise=_widget.default.getData("local_lytix_lytix_timeoverview_timeoverview_get",{contextid:contextid,courseid:courseid}).then((data=>{const activities=data.Activities,length=activities.length;for(let i=0;i<length;++i)if(activities[i].MedianTime>0)return data;throw new _widget.default.NoDataError})),stringsPromise=_widget.default.getStrings({lytix_timeoverview:{differing:{Resource:"timeoverview_label_resource",Video:"timeoverview_label_video",Forum:"timeoverview_label_forum",Course:"timeoverview_label_core",Quiz:"timeoverview_label_quiz",Grade:"timeoverview_label_grade",Submission:"timeoverview_label_submission",Feedback:"timeoverview_label_feedback",description:"timeoverview_description"}}});Promise.all([stringsPromise,dataPromise]).then((values=>{const strings=values[0],activities=values[1].Activities,view={description:{text:strings.description},data:[]},length=activities.length,rounder=new _percent_rounder.default;for(let i=0;i<length;++i){const activity=activities[i];activity.MedianTime<=0||view.data.push({activity:activity.Type.toLowerCase(),label:strings[activity.Type],percent:rounder.round(100*activity.MedianTime)})}return _templates.default.render("lytix_timeoverview/timeoverview",view)})).then((html=>{_widget.default.getContentContainer(WIDGET_ID).insertAdjacentHTML("beforeend",html)})).finally((()=>{document.getElementById(WIDGET_ID).classList.remove("loading")})).catch((error=>_widget.default.handleError(error,WIDGET_ID)))}}));

//# sourceMappingURL=timeoverview.min.js.map